require(["jquery","actionBean","EMUtils","domReady!"],function(a,c,b){function d(){var a=window.location.search.substring(1).split("\x26").filter(function(a){return 0===a.indexOf("targetUrl")})[0]||"";return a.substring(a.indexOf("\x3d")+1)}(b=b.getURLParams())&&b.referer&&"en"===b.referer&&(a(".web-redirect-banner").css("display","flex"),a(".bar-header").hide());a(".gotoen").click(function(){window.location.href=c.evernoteServiceBaseUrl+"/Login.action?yxoptout\x3dtrue"});a(".close-button").click(function(){a(".web-redirect-banner").hide()});
a("#switch-link").click(function(b){a("#switch-form").append('\x3cinput type\x3d"hidden" name\x3d"targetUrl" value\x3d"'+d()+'"/\x3e');a("#switch-form").submit()})});

require("jquery common StripesFieldModifier ga-util actionBean evaluateEmailFirstLogin domReady!".split(" "),function(a,m,f,b,c,e){function n(a){a.extraContentBelowForm&&(d.find("div").html(a.extraContentBelowForm),e.showRowNow(d))}function p(){e.hideRow(d)}function q(){var a=window.location.search.substring(1).split("\x26").filter(function(a){return 0===a.indexOf("targetUrl")})[0]||"";return a?"?"+a:a}var h=a("#login_form"),g=a("#username");g.focus();(new f("#username")).setupFieldEventHandler();
(new f("#password")).setupFieldEventHandler();var k=a("#loginButton"),l=a("#passwordRow");m.blockDoubleSubmit(h);a("#email-wrapper i.inline").hover(function(){a("#email-wrapper").addClass("visible-error")},function(){a("#email-wrapper").removeClass("visible-error")});a("#password-wrapper i.inline").hover(function(){a("#password-wrapper").addClass("visible-error")},function(){a("#password-wrapper").removeClass("visible-error")});a(".inline .FieldState_error-message").parent().siblings("input").addClass("error");
a("#email-wrapper i.inline").length&&(f.prototype.removeError=function(a,b){b.$field.removeClass("error");b.$field.next().next().html("")});a(".switch-service a").on("click",function(){b.trackEvent("account_login","click_switch_service","")});var d=a("#extraContentDiv");e.setup(h,g,l,a("#password"),a("#responseMessageRow"),a("#responseMessage"),a("#submitRow"),a("#eventToTrigger"),k,c.showRememberMe?a("#rememberMeRow"):a([]),c.showForgotPasswordLink?a("#forgotPasswordDiv"):a([]),c.showTerms?a("#termsRow"):
a([]),null,null,0<d.length?p:null,0<d.length?n:null);c.usernameImmutable&&g.val()&&!e.isVisible(l)&&k.click();-1==window.navigator.userAgent.indexOf("Android")&&-1==window.navigator.userAgent.indexOf("iPhone")&&-1===decodeURIComponent(window.location.search).indexOf("wechat_login\x3dfalse")&&(a(".wechat_login").show(),b.trackEvent("account_login","show_wechat_login_btn",""),a(".wechat_login .Btn").on("click",function(){b.trackEvent("account_login","click_wechat_login_btn","");window.location.href=
c.wechatLoginPath+q()}));b.trackEvent("account","login_action","view_login_screen_"+c.analyticsLoginOrigin);b.trackEvent("account_login","enter_signup_page","");(0<a("#password-wrapper .error-status").length||0<a("#email-wrapper .error-status").length)&&b.trackEvent("account","login_error","generic_error");a("#googleOauthButton").on("click",function(){b.trackEvent("account","login_action","google_openid_button_click")})});

require(["static/login_files/header"],function(){});

require(["static/login_files/growsumo","domReady!"],function(c){c.getGrowsumoUsername(function(a){if(a){a=c.prefixedReferralCode(a);var d=document.querySelector("form"),b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("name","referrerCode");b.value=a;d.appendChild(b)}})});

